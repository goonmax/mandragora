#!/bin/bash
hex="`kitty @ --to unix:@mykitty get-colors | grep ^ba | cut -c 25-`"

read -r -d '' pop_and_turn << EOV
def pop_and_turn(c):
      if c == RGB(0,0,0):
              return HEX('#ff0000')
      else:
              return col.rotate(10)

print(pop_and_turn(HEX('$hex')))
EOV

if [[ -z $1 ]]; then
    newhex=`echo "$pop_and_turn"  | /home/nexor/.pyenv/shims/colp -s`
else
    newhex=`echo "HEX('"$hex"').rotate(-10.00)" | /home/nexor/.pyenv/shims/colp -s`
fi


kitty @ --to unix:@mykitty set-colors background=$newhex
